System.register("chunks:///_virtual/apic.ts",["cc","./manager_ai.ts","./manager_game.ts","./manage_poker.ts","./manage_pool.ts","./manage_res.ts"],(function(e){"use strict";var t,n,a,c,s,u;return{setters:[function(e){t=e.cclegacy},function(e){n=e.default},function(e){a=e.default},function(e){c=e.default},function(e){s=e.default},function(e){u=e.default}],execute:function(){t._RF.push({},"6cf6bk3XqZFjLoep1SVckgD","apic",void 0);class o{}e("default",o),o.resMg=u.GetInstance(u),o.poolMg=s.GetInstance(s),o.gameMg=a.GetInstance(a),o.pokerMg=c.GetInstance(c),o.aiMg=n.GetInstance(n),t._RF.pop()}}}));

System.register("chunks:///_virtual/gameDate.ts",["cc"],(function(e){"use strict";var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"b9573sijINOmrmRKx/KzKH6","gameDate",void 0);class c{}e("gameDate",c),c.gameScore_change=10,c.gameScore_init=0,t._RF.pop()}}}));

System.register("chunks:///_virtual/interface.ts",["cc"],(function(){"use strict";var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"e57e0ozrnxGyKFFqTb8IJqD","interface",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/item_poker.ts",["cc","./apic.ts","./manage_event.ts"],(function(e){"use strict";var t,n,s,o,i,a,r;return{setters:[function(e){t=e.cclegacy,n=e.Component,s=e.Node,o=e.Sprite,i=e._decorator},function(e){a=e.default},function(e){r=e.manage_event}],execute:function(){var p;t._RF.push({},"228f5tHQ/lCz6CB4CUYIwLt","item_poker",void 0);const{ccclass:c,property:h}=i;e("item_poker",c("item_poker")(p=class extends n{constructor(...e){super(...e),this.itemInfo="poker"}onLoad(){}onEnable(){this.node.on(s.EventType.TOUCH_START,this._touchStarHandel,this)}start(){a.gameMg.loadRes().then((()=>{this.updateView()}))}changeData(e){this.itemInfo=e}update(e){}lateUpdate(){}onDisable(){this.node.off(s.EventType.TOUCH_START,this._touchStarHandel,this),this.updatePokerInfo("poker"),this.unscheduleAllCallbacks()}_touchStarHandel(){if("layout_bule"!=this.node.parent.name)return;parseInt(this.itemInfo.split("-")[0]),parseInt(this.itemInfo.split("-")[1]);this.updatePokerInfo(this.itemInfo),this.scheduleOnce((()=>{r.event.emit("palyer_act",this.node)}),.3)}__eventAiFunc(){this.node.on(s.EventType.TOUCH_START,this._touchStarHandel,this)}updateView(){}updatePokerInfo(e){a.resMg.spriteFrames&&(this.node.getComponent(o).spriteFrame=a.resMg.spriteFrames.getSpriteFrame(e))}onDestroy(){}})||p);t._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./apic.ts","./gameDate.ts","./manage_event.ts","./manage_poker.ts","./manage_pool.ts","./manage_res.ts","./manager_ai.ts","./manager_game.ts","./item_poker.ts","./scene_main.ts","./interface.ts","./mathematics.ts","./singleton.ts"],(function(){"use strict";return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/manage_event.ts",["cc"],(function(e){"use strict";var t,n;return{setters:[function(e){t=e.cclegacy,n=e.EventTarget}],execute:function(){t._RF.push({},"a999e+7RCRP2bDBEwlCwDrx","manage_event",void 0);class a{}e("manage_event",a),a.event=new n,t._RF.pop()}}}));

System.register("chunks:///_virtual/manage_poker.ts",["cc","./singleton.ts"],(function(e){"use strict";var t,r;return{setters:[function(e){t=e.cclegacy},function(e){r=e.Singleton}],execute:function(){t._RF.push({},"2e6e5msL6BI+rxalNLL9LjS","manage_poker",void 0);e("default",class extends r{constructor(...e){super(...e),this.pokerArr=[],this.pokerBlue=[],this.pokerRed=[]}init(){this.pokerArr.length=0,this.pokerBlue.length=0,this.pokerRed.length=0;for(let e=1;e<14;e++)for(let t=1;t<5;t++){let r=e+"-"+t;this.pokerArr.push(r)}}}),t._RF.pop()}}}));

System.register("chunks:///_virtual/manage_pool.ts",["cc","./singleton.ts"],(function(e){"use strict";var t,n,l,o;return{setters:[function(e){t=e.NodePool,n=e.instantiate,l=e.cclegacy},function(e){o=e.Singleton}],execute:function(){l._RF.push({},"f68a6uHRwBAYJvl5yODGlA+","manage_pool",void 0);e("default",class extends o{constructor(...e){super(...e),this.enemyPrefab=null,this.enemyPool=null}init(){this.enemyPrefab=null,this.enemyPool=null}initPool(e=5){this.enemyPool=new t;for(let t=0;t<e;++t){let e=n(this.enemyPrefab);this.enemyPool.put(e)}}createEnemy(){let e=null;return e=this.enemyPool.size()>0?this.enemyPool.get():n(this.enemyPrefab),e}pullEnemy(e){this.enemyPool.put(e)}}),l._RF.pop()}}}));

System.register("chunks:///_virtual/manage_res.ts",["cc","./apic.ts","./singleton.ts"],(function(e){"use strict";var r,t,s,n,o,a;return{setters:[function(e){r=e.resources,t=e.SpriteAtlas,s=e.Prefab,n=e.cclegacy},function(e){o=e.default},function(e){a=e.Singleton}],execute:function(){n._RF.push({},"eba74LG9vtC8pmtoKuX58Gw","manage_res",void 0);e("default",class extends a{constructor(...e){super(...e),this.spriteFrames=null,this.otherSpriteFrames=null}loadOtherRes(){return new Promise(((e,s)=>{r.load("textures/poker2",t,((r,t)=>{r&&s(),o.resMg.otherSpriteFrames=t,e()}))}))}loadPokerRes(){return new Promise(((e,s)=>{r.load("textures/poker",t,((r,t)=>{r&&s(),o.resMg.spriteFrames=t,e()}))}))}loadPokerPre(){return new Promise(((e,t)=>{r.load("prefabs/item_poker",s,((r,s)=>{r&&t(),e(s)}))}))}init(){}}),n._RF.pop()}}}));

System.register("chunks:///_virtual/manager_ai.ts",["cc","./apic.ts","./mathematics.ts","./singleton.ts","./manage_event.ts"],(function(t){"use strict";var e,n,a,i,s;return{setters:[function(t){e=t.cclegacy},function(t){n=t.default},function(t){a=t.default},function(t){i=t.Singleton},function(t){s=t.manage_event}],execute:function(){e._RF.push({},"0d3b4MC20hEd5FUqODDRQto","manager_ai",void 0);t("default",class extends i{constructor(...t){super(...t),this.aiInfo=null}init(){this.aiInfo={name:"kalami",score:0,avatar:"bg05",adree:2}}aiDrawCard(){let t=a.randomNum(n.pokerMg.pokerRed.length,0);s.event.emit("ai_act",t)}}),e._RF.pop()}}}));

System.register("chunks:///_virtual/manager_game.ts",["cc","./apic.ts","./singleton.ts"],(function(e){"use strict";var t,r,i;return{setters:[function(e){t=e.cclegacy},function(e){r=e.default},function(e){i=e.Singleton}],execute:function(){t._RF.push({},"cb76a9Q829Of4U/nN0s0Ms6","manager_game",void 0);e("default",class extends i{constructor(...e){super(...e),this.itemPokerPre=null,this.itemPokerNode=[],this.playerInfo=null,this.isGameFinish=!1}init(){this.itemPokerPre=null,this.itemPokerNode.length=0,r.poolMg.init(),r.pokerMg.init(),r.aiMg.init(),this.playerInfo={name:"Timtim",score:0,avatar:"bg05",adree:1}}loadRes(){return new Promise(((e,t)=>{r.resMg.loadPokerPre().then((i=>{this.itemPokerPre=i,r.poolMg.enemyPrefab=i,r.poolMg.initPool(11),r.resMg.loadOtherRes().then((()=>{r.resMg.loadPokerRes().then((()=>{e()})).catch((()=>{t()}))}))}))}))}createrPoker(){if(this.itemPokerPre)return r.poolMg.createEnemy()}removePoker(e){r.poolMg.pullEnemy(e)}}),t._RF.pop()}}}));

System.register("chunks:///_virtual/mathematics.ts",["cc","./singleton.ts"],(function(t){"use strict";var e,n;return{setters:[function(t){e=t.cclegacy},function(t){n=t.Singleton}],execute:function(){e._RF.push({},"8a330KcJwdM5JFoimCB/tC2","mathematics",void 0);t("default",class extends n{static randomNum(t,e){return t instanceof Number&&e instanceof Number||(t=parseInt(t),e=parseInt(e)),Math.floor(Math.random()*(t-e+1)+e)}}),e._RF.pop()}}}));

System.register("chunks:///_virtual/scene_main.ts",["cc","./apic.ts","./gameDate.ts","./manage_event.ts","./mathematics.ts","./item_poker.ts"],(function(e){"use strict";var t,a,r,i,n,s,o,l,h,p,u,g;return{setters:[function(e){t=e.cclegacy,a=e.Component,r=e.find,i=e.Button,n=e.Label,s=e.Sprite,o=e._decorator},function(e){l=e.default},function(e){h=e.gameDate},function(e){p=e.manage_event},function(e){u=e.default},function(e){g=e.item_poker}],execute:function(){var m;t._RF.push({},"1f50cHJNGRB25J8rfsYVxT3","scene_main",void 0);const{ccclass:c,property:_}=o;e("scene_main",c("scene_main")(m=class extends a{constructor(...e){super(...e),this.btn_star=null,this.btn_finish=null,this.btn_nextGame=null,this.layout_bule=null,this.layout_red=null,this.item_poker=null,this.avatar_red=null,this.avatar_bule=null,this.bule_laber=null,this.red_laber=null,this.bule_head=null,this.red_head=null,this.playerAct=!1}onLoad(){l.gameMg.init(),this.initView()}initView(){this.btn_star=r("Canvas/btn_star").getComponent(i),this.btn_finish=r("Canvas/btn_finish").getComponent(i),this.btn_nextGame=r("Canvas/btn_nextGame").getComponent(i),this.layout_bule=r("Canvas/layout_bule"),this.layout_red=r("Canvas/layout_red"),this.item_poker=r("Canvas/item_poker"),this.avatar_red=r("Canvas/avatar_red"),this.avatar_bule=r("Canvas/avatar_bule"),this.bule_laber=this.avatar_bule.getChildByName("score").getComponent(n),this.red_laber=this.avatar_red.getChildByName("score").getComponent(n),this.bule_head=this.avatar_bule.getChildByName("sprite_head").getComponent(s),this.red_head=this.avatar_red.getChildByName("sprite_head").getComponent(s)}onEnable(){this.btn_star&&this.btn_star.node.on("click",this.onClickHandel,this),this.btn_finish&&this.btn_finish.node.on("click",this.onClickHandel,this),this.btn_nextGame&&this.btn_nextGame.node.on("click",this.onClickHandel,this),p.event.on("palyer_act",this.__eventPlayerFunc,this),p.event.on("ai_act",this.__eventAiFunc,this)}start(){u.randomNum(2,1);l.gameMg.loadRes().then((()=>{this.updateDate()}))}update(e){}lateUpdate(){}onDisable(){this.btn_star&&this.btn_star.node.off("click",this.onClickHandel,this),this.btn_finish&&this.btn_finish.node.off("click",this.onClickHandel,this),this.btn_nextGame&&this.btn_nextGame.node.off("click",this.onClickHandel,this),p.event.off("palyer_act",this.__eventPlayerFunc,this),p.event.off("ai_act",this.__eventAiFunc,this),this.unscheduleAllCallbacks(),this.playerAct=!1}updateDate(){let e=l.gameMg.playerInfo,t=l.aiMg.aiInfo;this.red_laber.string=e.name+e.score,this.red_head.spriteFrame=l.resMg.otherSpriteFrames.getSpriteFrame(e.avatar),this.bule_laber.string=t.name+t.score,this.bule_head.spriteFrame=l.resMg.otherSpriteFrames.getSpriteFrame(t.avatar)}onClickHandel(e){let t=e.node.name;switch(this.btn_star.interactable="btn_star"!=t,t){case"btn_star":case"btn_nextGame":if(!l.resMg.spriteFrames){l.gameMg.loadRes().then((()=>{this.gameStar()}));break}this.gameStar();break;case"btn_finish":this.gameFinish()}}gameFinish(){this.layout_bule.removeAllChildren(),this.layout_red.removeAllChildren(),l.pokerMg.init(),l.gameMg.isGameFinish=!1}gameStar(){this.btn_star.interactable=!1;let e=u.randomNum(10,5);this.gameFinish();for(let t=0;t<11;t++){let a=l.gameMg.createrPoker(),r=u.randomNum(13,1),i=u.randomNum(4,1);for(;-1==l.pokerMg.pokerArr.indexOf(r+"-"+i);)r=u.randomNum(13,1),i=u.randomNum(4,1);let n=r+"-"+i;t<5?l.pokerMg.pokerBlue.push(n):(e==t&&(n="poker"),l.pokerMg.pokerRed.push(n),this.updatePokerInfo(a,n)),l.pokerMg.pokerArr.splice(l.pokerMg.pokerArr.indexOf(r+"-"+i),1),a.getComponent(g).changeData(n),a.parent=t<5?this.layout_bule:this.layout_red}}updatePokerInfo(e,t){l.resMg.spriteFrames&&(e.getComponent(s).spriteFrame=l.resMg.spriteFrames.getSpriteFrame(t))}__eventPlayerFunc(e){this.playerAct=!0,l.gameMg.isGameFinish=!0;let t=null,a=!0,r=e.getComponent(g).itemInfo;if(r){for(let e=0;e<l.pokerMg.pokerBlue.length;e++)l.pokerMg.pokerBlue[e]==r&&(t=e);if(null!=t){for(let i=0;i<l.pokerMg.pokerRed.length;i++){let n=l.pokerMg.pokerRed[i];if(parseInt(n.split("-")[0])==parseInt(r.split("-")[0])){let r=this.layout_red.children[i];a=!1,this.scheduleOnce((()=>{l.pokerMg.pokerRed.splice(i,1),l.pokerMg.pokerBlue.splice(t,1),e&&l.gameMg.removePoker(e),r&&l.gameMg.removePoker(r)}),.8)}}a&&(l.pokerMg.pokerRed.push(l.pokerMg.pokerBlue[t]),e.parent=this.layout_red,l.pokerMg.pokerBlue.splice(t,1)),this.gameOver(l.pokerMg.pokerBlue).then((()=>{l.aiMg.aiInfo.score+=h.gameScore_change,this.updateDate()})),l.gameMg.isGameFinish&&this.scheduleOnce((()=>{l.aiMg.aiDrawCard()}),.2)}else e&&l.gameMg.removePoker(e)}}__eventAiFunc(e){let t=this.layout_red.children[e],a=!0,r=(e,t)=>{e.getComponent(s).spriteFrame=l.resMg.spriteFrames.getSpriteFrame(t)};if(t){let i=l.pokerMg.pokerRed[e];if(!i)return;for(let n=0;n<l.pokerMg.pokerBlue.length;n++){let s=l.pokerMg.pokerBlue[n];if(!s)return;let o=parseInt(i.split("-")[0]);if(parseInt(s.split("-")[0])==o){let i=this.layout_bule.children[n];a=!1,r(i,s),l.pokerMg.pokerBlue.splice(n,1),this.scheduleOnce((()=>{l.pokerMg.pokerRed.splice(e,1),t&&l.gameMg.removePoker(t),i&&l.gameMg.removePoker(i)}),.5)}}a&&(l.pokerMg.pokerBlue.push(i),l.pokerMg.pokerRed.splice(e,1),t.parent=this.layout_bule,r(t,"poker")),this.gameOver(l.pokerMg.pokerRed).then((()=>{l.gameMg.playerInfo.score+=h.gameScore_change,this.updateDate()}))}}gameOver(e){return new Promise(((t,a)=>{(e.length<=0||1==e.length&&"poker"==e[0])&&(this.btn_star.interactable=!0,this.scheduleOnce((()=>{this.gameStar()}),.8),t())}))}onDestroy(){}})||m);t._RF.pop()}}}));

System.register("chunks:///_virtual/singleton.ts",["cc"],(function(n){"use strict";var t;return{setters:[function(n){t=n.cclegacy}],execute:function(){t._RF.push({},"3cc8bmiTf1EmLmbi1TA1mds","singleton",void 0);class s{static GetInstance(n){return null==this.instance&&(this.instance=new n),this.instance}init(){console.dir(this)}}n("Singleton",s),s.instance=null,t._RF.pop()}}}));

//# sourceMappingURL=index.js.map